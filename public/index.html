<!DOCTYPE html>
<html>
  <head>
    <title>My first Chartist Tests</title>
    <link rel="stylesheet" href="chartist-js/dist/chartist.min.css">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <script src="chartist-js/dist/chartist.min.js"></script> 
    <script src="scripts/moment.min.js"></script> 

    <div class="ct-chart ct-minor-seventh"></div>
    <script>
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", "./data", false ); // false for synchronous request
        xmlHttp.send(null);
        var rawData = xmlHttp.responseText;
        
        var jsonMeasurements = JSON.parse(rawData)
        
        var data = []
        for (var i = 0; i < jsonMeasurements.length; ++i) {
            var measurement = jsonMeasurements[i]
            data.push({x: new Date(measurement.timestamp), y: measurement.temp})
        }
        
        new Chartist.Line('.ct-chart', {
            series: [{
                name: 'series-1',
                data: data
            }]
        }, {
            high: 25,
            low: 0,
            showPoint: false,
            axisX: {
                onlyInteger: true,
                type: Chartist.FixedScaleAxis,
                divisor: 15,
                labelInterpolationFnc: function(value) {
                    return moment(value).format('HH:MM D/MM');
                }
            }
        });
    </script>
  </body>
</html>